<!--
  Generated template for the PresentEventPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>事件上报</ion-title>
  </ion-navbar>
</ion-header>
<ion-content>
  <ion-card>
    <ion-card-content>
      <ion-list>
        <ion-item-divider>位置信息</ion-item-divider>
        <ion-item>
          <ion-label>所属小区</ion-label>
          <ion-select [(ngModel)]="villageSeleted" interface="popover" placeholder="请选择小区" >
            <ion-option [value]="village.value" *ngFor="let village of villages">{{village.text}}</ion-option>
          </ion-select>
        </ion-item>
        <ion-item>
          <ion-label>所属网格</ion-label>
          <ion-select [(ngModel)]="gridSeleted" interface="popover" placeholder="请选择网格" >
            <ion-option [value]="grid.value" *ngFor="let grid of grids">{{grid.text}}</ion-option>
          </ion-select>
        </ion-item>
        <div class="item item-block item-md item-input">
          <ion-row>
            <ion-col col-4>
              <ion-label>事件地址</ion-label>
            </ion-col>
            <ion-col>
              <ion-input type="text" readonly [(ngModel)]="position"></ion-input>
            </ion-col>
            <ion-col center text-center col-3>
              <button ion-button small>
                定位
              </button>
            </ion-col>
          </ion-row>
        </div>
        <ion-item>
          <ion-input type="text" [(ngModel)]="address"></ion-input>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-content>
      <ion-list>
        <ion-item-divider>上报信息</ion-item-divider>
        <ion-item>
          <ion-label>事件类型</ion-label>
          <ion-select [(ngModel)]="eventTypeSeleted" interface="popover" placeholder="请选择事件类型">
            <ion-option [value]="eventType.value" *ngFor="let eventType of eventTypes">{{eventType.text}}</ion-option>
          </ion-select>
        </ion-item>
      </ion-list>
      <ion-list>
        <ion-item>
          <ion-label>事件说明</ion-label>
          <ion-textarea placeholder="事件必要的说明" rows='3' [(ngModel)]="explain"></ion-textarea>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-content>
      <ion-list>
        <ion-item-divider>图片信息</ion-item-divider>
        <div class="image-list">
          <div class="image-item" *ngFor="let picture of pictures">
            <img [src]="picture" />
            <span class="del" (click)="delImg(picture)">
              <!-- <div class="fa fa-times-circle"></div> -->
              <ion-icon ios="ios-remove-circle" md="md-remove-circle" color="dark"></ion-icon>
            </span>
          </div>
          <div class="image-item" (click)="showActionSheet()">
            <img [src]="'assets/imgs/iconfont-tianjia.png'" />

          </div>
        </div>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-content>
      <ion-list>
        <ion-item-divider>音频信息</ion-item-divider>
        <div class="data-item" *ngFor="let audio of audios" (click)="playRecord(audio)">
          <ion-row style="width:100%">
            <ion-col col-10 style="line-height:2.1em">{{audio}}</ion-col>
            <ion-col col-2>
              <button ion-button small full color="danger" (click)="deleteAudio($event,audio)">
                删除
              </button>
            </ion-col>
          </ion-row>
        </div>
        <div class="data-item">
          <button ion-button small full color="primary" (click)="showAudioRecord()">
            开始录音
          </button>
        </div>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <div style="text-align: center; margin-top:30px;padding:15px">
    <button ion-button default full color="primary" (click)="postEvent($event)">
      事件上报
    </button>
  </div>
</ion-content>